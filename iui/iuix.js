(function(){var _1=20;var _2=0;var _3=null;var _4=null;var _5=0;var _6=location.hash;var _7="#_";var _8=[];var _9=0;var _a;window.iui={showPage:function(_b,_c){if(_4){_4.removeAttribute("selected");_4=null;}if(_b.className.indexOf("dialog")!=-1){showDialog(_b);}else{var _d=_3;_3=_b;if(_d){setTimeout(slidePages,0,_d,_b,_c);}else{updatePage(_b,_d);}}},showPageById:function(_e){var _f=$(_e);if(_f){var _10=_8.indexOf(_e);var _11=_10!=-1;if(_11){_8.splice(_10,_8.length);}iui.showPage(_f,_11);}},showPageByHref:function(_12,_13,_14,cb){var req=new XMLHttpRequest();req.onerror=function(){if(cb){cb(false);}};req.onreadystatechange=function(){if(req.readyState==4){if(_14){replaceElementWithSource(_14,req.responseText);}else{var _17=document.createElement("div");_17.innerHTML=req.responseText;iui.insertPages(_17.childNodes);}if(cb){setTimeout(cb,1000,true);}}};if(_13){req.open("POST",_12,true);req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");req.setRequestHeader("Content-Length",_13.length);req.send(_13.join("&"));}else{req.open("GET",_12,true);req.send(null);}},insertPages:function(_18){var _19;for(var i=0;i<_18.length;++i){var _1b=_18[i];if(_1b.nodeType==1){if(!_1b.id){_1b.id="__"+(++_9)+"__";}if(_1b.ownerDocument!=document){document.adoptNode(_1b);}document.body.appendChild(_1b);if(_1b.getAttribute("selected")=="true"||!_19){_19=_1b;}--i;}}if(_19){iui.showPage(_19);}},getSelectedPage:function(){for(var _1c=document.body.firstChild;_1c;_1c=_1c.nextSibling){if(_1c.nodeType==1&&_1c.getAttribute("selected")=="true"){return _1c;}}}};addEventListener("load",function(_1d){var _1e=iui.getSelectedPage();if(_1e){iui.showPage(_1e);}setTimeout(preloadImages,0);setTimeout(checkOrientAndLocation,0);_a=setInterval(checkOrientAndLocation,300);},false);addEventListener("click",function(_1f){var _20=findParent(_1f.target,"a");if(_20){function unselect(){_20.removeAttribute("selected");}if(_20.href&&_20.hash&&_20.hash!="#"){_20.setAttribute("selected","true");iui.showPage($(_20.hash.substr(1)));setTimeout(unselect,500);}else{if(_20==$("backButton")){history.back();}else{if(_20.getAttribute("type")=="submit"){submitForm(findParent(_20,"form"));}else{if(_20.target=="_replace"){_20.setAttribute("selected","progress");iui.showPageByHref(_20.href,null,_20,unselect);}else{if(!_20.target){_20.setAttribute("selected","progress");iui.showPageByHref(_20.href,null,null,unselect);}else{return;}}}}}_1f.preventDefault();}},true);addEventListener("click",function(_21){var div=findParent(_21.target,"div");if(div&&div.className=="toggle"){div.setAttribute("toggled",div.getAttribute("toggled")!="true");_21.preventDefault();}},true);function checkOrientAndLocation(){if(window.innerWidth!=_5){_5=window.innerWidth;var _23=_5==320?"profile":"landscape";document.body.setAttribute("orient",_23);setTimeout(scrollTo,100,0,1);}if(location.hash!=_6){var _24=location.hash.substr(_7.length);iui.showPageById(_24);}}function showDialog(_25){_4=_25;_25.setAttribute("selected","true");if(_25.target){return;}_25.onsubmit=function(_26){_26.preventDefault();submitForm(_25);};_25.onclick=function(_27){if(_27.target==_25){_25.removeAttribute("selected");document.body.removeChild(iframe);}};}function updatePage(_28,_29){if(!_28.id){_28.id="__"+(++_9)+"__";}location.href=_6=_7+_28.id;_8.push(_28.id);var _2a=$("pageTitle");_2a.innerHTML=_28.title||"-";var _2b=$("backButton");if(_2b){var _2c=$(_8[_8.length-2]);if(_2c){_2b.style.display="inline";_2b.innerHTML=_2c.title?_2c.title:"Back";}else{_2b.style.display="none";}}}function slidePages(_2d,_2e,_2f){_2e.style.left="100%";_2e.setAttribute("selected","true");scrollTo(0,1);var _30=100;slide();var _31=setInterval(slide,_2);clearInterval(_a);function slide(){_30-=_1;if(_30<=0){_30=0;_2d.removeAttribute("selected");clearInterval(_31);_a=setInterval(checkOrientAndLocation,300);setTimeout(updatePage,0,_2e,_2d);}_2d.style.left=(_2f?(100-_30):(_30-100))+"%";_2e.style.left=(_2f?-_30:_30)+"%";}}function preloadImages(){var _32=document.createElement("div");_32.id="preloader";document.body.appendChild(_32);}function submitForm(_33){iui.showPageByHref(_33.action,encodeForm(_33));}function encodeForm(_34){var _35=[];var _36=_34.getElementsByTagName("input");for(var i=0;i<_36.length;++i){if(_36[i].name){_35.push(_36[i].name+"="+escape(_36[i].value));}}return _35;}function findParent(_38,_39){while(_38&&(_38.nodeType!=1||_38.localName.toLowerCase()!=_39)){_38=_38.parentNode;}return _38;}function replaceElementWithSource(_3a,_3b){var _3c=_3a.parentNode;var _3d=_3a;while(_3c.parentNode!=document.body){_3c=_3c.parentNode;_3d=_3d.parentNode;}var _3e=document.createElement(_3d.localName);_3e.innerHTML=_3b;_3c.removeChild(_3d);while(_3e.firstChild){_3c.appendChild(_3e.firstChild);}}function $(id){return document.getElementById(id);}function ddd(){console.log.apply(console,arguments);}})();